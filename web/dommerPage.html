<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SULTSTUA</title>
    <link rel="stylesheet" href="main.css"/>
</head>
<body>
    <header>
        Dommere
    </header>
    <ul class=judgeList>
        <li>123</li>        
    </ul>
    <button class="creatJudge">
        Create New
    </button>
</body>

<script type="module">
    import { createNewJudge } from './utils/judge.js';

    let creatButtom = document.querySelector(".creatJudge");

        creatButtom.addEventListener("click", () => {
            let newJudge = prompt("Name new jedge!");
            if (!newJudge){
                return;
            }
            createNewJudge(newJudge)
                .then(() => {
                    onLoad()
                })
            
    })


    function makeList(listOfJudge){
        document.querySelector(".judgeList").innerHTML = ""

        for(let judge of listOfJudge){
            let listItem = document.createElement("li");
            listItem.innerText = judge.name;
            document.querySelector(".judgeList").append(listItem);
        }
    }

    async function onLoad(){
        let response = await fetch("/api/getJudges");
        let json = await response.json();
        makeList(json);
    }
    window.addEventListener("load", onLoad);
</script>